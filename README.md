# java-convenience-store-precourse

## 미션 소개

이 프로젝트는 우아한테크코스 프리코스 4주차 미션으로, 편의점을 구현한다.

## 미션 목표

### 기본 요구사항

- indent의 depth를 3이 넘지 않도록 구현한다.
- 메서드가 한 가지 일만 하도록 최대한 작게 만든다.
- 3항 연산자를 쓰지 않는다.
- 메서드의 길이가 10 라인을 넘어가지 않도록 구현한다.
- else 예약어를 쓰지 않는다.
- Enum을 적용하여 구현한다.

### 개인적 목표에 따른 요구사항

- 객체 지향 프로그래밍 원칙을 적용한 편의점을 구현한다.
- 기능별 커밋을 원칙으로 한다.
- TDD를 적용한다.
    - 각 기능별로 테스트 케이스를 작성한다.
    - 기능별로 해피 케이스, 예외 케이스를 나누어 작성한다.
    - 실패 테스트 작성 -> 테스트 통과 -> 리팩토링
- 클린 코드를 지향하며 의미 있는 변수명과 메서드명을 사용한다.

## 주요 클래스 설명

### 도메인 객체

- `Application`: 프로그램의 진입점이며 ConvenienceStoreManager를 초기화하고 실행을 위임한다.
- `ConvenienceStoreManager`: 편의점 로직을 총괄 관리한다.

### 유틸리티

- `IoHandler`: 입출력 작업을 총괄하는 싱글톤 객체
- `InputHandler`: Console 입력을 담당하는 싱글톤 객체
- `OutputHandler`: 결과 출력을 담당하는 싱글톤 객체
- `ValidatingParser`: 입력값 파싱과 검증을 담당하는 싱글톤 객체
- `InputValidationMessage`: 입력값 검증 관련 에러 메시지 Enum

## 기능 목록

### 입력 기능 (InputHandler)

- [ ] 사용자가 적절한 값을 입력할때까지 Console.readLine()을 사용해 구매할 상품과 수량을 입력받는다.
- [ ] 사용자가 적절한 값을 입력할때까지 Console.readLine()을 사용해 프로모션 적용 여부를 입력받는다.
- [ ] 사용자가 적절한 값을 입력할때까지 Console.readLine()을 사용해 프로모션 적용이 불가할때 정가 적용 여부를 입력받는다.
- [ ] 사용자가 적절한 값을 입력할때까지 Console.readLine()을 사용해 맴버십 할인 적용 여부를 입력받는다.
- [ ] 사용자가 적절한 값을 입력할때까지 Console.readLine()을 사용해 추가 구매 여부를 입력받는다.

### 입력 검증 및 변환 기능 (ValidatingParser)

- [ ] 구매 상품의 이름과 수량이 "[]"(대괄호)로 묶여있는지 검증한다.
- [ ] 구매 상품의 이름과 수량이 '-'(하이픈)으로 나눌수 있는지 검증한다.
- [ ] 구매 상품의 목록을 ','(콤마)로 나눌수 있는지 검증한다.
- [ ] 구매 상품의 이름이 판매하고 있는 상품에 부합하는지 검증한다.
- [ ] 구매 상품의 수량이 양의 숫자인지 검증한다.
- [ ] 구매 상품의 수량이 최대 범위를 넘어서는지 검증한다.
- [ ] 프로모션 적용 여부가 'Y', 'N'인지 검증한다.
- [ ] 프로모션 적용이 불가할때 정가 적용 여부가 'Y', 'N'인지 검증한다.
- [ ] 맴버십 할인 적용 여부가 'Y', 'N'인지 검증한다.
- [ ] 추가 구매 여부가 'Y', 'N'인지 검증한다.

### 출력 기능 (OutputHandler)

- [ ] 환영인사와 상품명, 가격, 프로모션 이름, 재고가 있다면 재고를, 없다면 재고없음을 출력한다.
- [ ] 프로모션 적용 여부 안내 메시지를 출력한다.
- [ ] 프로모션 적용이 불가할때 정가 적용 여부를 상품명, 수량을 포함한 안내 메시지를 출력한다.
- [ ] 맴버십 할인 적용 안내 메시지를 출력한다.
- [ ] 구매 상품 내역, 증정 상품 내역, 금액 정보를 출력한다.
- [ ] 추가 구매 여부 안내 메시지를 출력한다.
- [ ] 사용자의 입력이 잘못되었을때 에러 안내 메시지를 출력한다.

### 편의점 매니저 기능

- [ ] 편의점 기능 전체를 총괄한다.

### 상품 정보 및 프로모션 정보를 읽는 기능

- [ ] 상품 정보와 프로모션 정보를 읽어 상품 목록과 프로모션 목록을 반환한다.
- [ ] 구매 상품의 이름과 수량이 "[]"(대괄호)로 묶여있는지 검증한다.
- [ ] 구매 상품의 이름과 수량이 '-'(하이픈)으로 나눌수 있는지 검증한다.
- [ ] 구매 상품의 목록을 ','(콤마)로 나눌수 있는지 검증한다.
- [ ] 구매 상품의 수량이 양의 숫자인지 검증한다.
- [ ] 구매 상품의 수량이 최대 범위를 넘어서는지 검증한다.
- [ ] 프로모션 구매 수량이 양의 숫자인지 검증한다.
- [ ] 프로모션 구매 수량이 최대 범위를 넘어서는지 검증한다
- [ ] 프로모션 증정 수량이 양의 숫자인지 검증한다.
- [ ] 프로모션 증정 수량이 최대 범위를 넘어서는지 검증한다
- [ ] 프로모션 시작 날짜와 종료 날짜의 형식이 유효한지 검증한다.
- [ ] 하나의 상품에 중복된 프로모션이 있는지 검증한다.

### 상품 기능

- [ ] 상품의 이름, 가격, 프로모션을 받아 상품을 생성한다.

### 재고 관리 기능

- [ ] 각 상품의 재고를 고려하여 주문 가능 여부를 확인한다.
- [ ] 주문이 이루어지면 해당 상품의 재고를 감소시킨다.

### 프로모션 기능

- [ ] 프로모션의 이름, 구매수량, 증정수량, 시작날짜, 종료날짜를 입력받아 프로모션을 생성한다.
- [ ] 프로모션 재고를 고려하여 적용 가능 여부를 확인한다.
- [ ] 구매 수량과 프로모션 적용 수량을 비교하여 구매 수량을 추가할지 확인한다.
- [ ] 구매 수량과 프로모션 적용 수량을 비교하여 프로모션 재고가 부족하면 일반 재고를 사용할지 확인한다.

### 멤버십 기능

- [ ] 예상 구매 목록을 받아 예상 멤버십 할인 금액을 계산한다.
- [ ] 예상 멤버십 할인 금액이 한도를 초과하는지 확인한다.

### 주문 기능

- [ ] 상품과 수량으로 주문을 생성한다.

### 영수증 기능

- [ ] 주문을 받아 영수증을 생성한다.

## 테스트 목록

### 입력 검증 및 변환 테스트 (ValidatingParser)

- [ ] 구매 상품 목록을 받아 상품 목록을 성공적으로 생성한다.
- [ ] 구매 상품의 이름과 수량이 "[]"(대괄호)로 묶여있지 않다면 예외가 발생한다.
- [ ] 구매 상품의 이름과 수량이 '-'(하이픈)으로 나눌수 없다면 예외가 발생한다.
- [ ] 구매 상품의 목록을 ','(콤마)로 나눌수 있는지 없다면 예외가 발생한다.
- [ ] 구매 상품의 이름이 판매하고 있는 상품에 부합하지 않으면 예외가 발생한다.
- [ ] 구매 상품의 수량이 양의 숫자가 아니면 예외가 발생한다.
- [ ] 구매 상품의 수량이 최대 범위를 넘어선다면 예외가 발생한다.
- [ ] 프로모션 적용 여부가 'Y', 'N'가 아니면 예외가 발생한다.
- [ ] 프로모션 적용이 불가할때 정가 적용 여부가 'Y', 'N'가 아니면 예외가 발생한다.
- [ ] 맴버십 할인 적용 여부가 'Y', 'N'가 아니면 예외가 발생한다.
- [ ] 추가 구매 여부가 'Y', 'N'가 아니면 예외가 발생한다.

### 상품 정보 및 프로모션 정보를 읽는 테스트

- [ ] 상품 정보와 프로모션 정보를 읽어 상품 목록과 프로모션 목록을 성공적으로 생성한다.
- [ ] 구매 상품의 이름과 수량이 "[]"(대괄호)로 묶여있지 않다면 예외가 발생한다.
- [ ] 구매 상품의 이름과 수량이 '-'(하이픈)으로 나눌수 없다면 예외가 발생한다.
- [ ] 구매 상품의 목록을 ','(콤마)로 나눌수 없다면 예외가 발생한다.
- [ ] 구매 상품의 수량이 양의 숫자가 아니라면 예외가 발생한다.
- [ ] 구매 상품의 수량이 최대 범위를 넘어선다면 예외가 발생한다.
- [ ] 프로모션 구매 수량이 양의 숫자가 아니면 예외가 발생한다.
- [ ] 프로모션 구매 수량이 최대 범위를 넘어선다면 예외가 발생한다.
- [ ] 프로모션 증정 수량이 양의 숫자가 아니면 예외가 발생한다.
- [ ] 프로모션 증정 수량이 최대 범위를 넘어선다면 예외가 발생한다.
- [ ] 프로모션 시작 날짜와 종료 날짜의 형식이 유효하지 않으면 예외가 발생한다.
- [ ] 하나의 상품에 중복된 프로모션이 있다면 예외가 발생한다.

### 상품 테스트

- [ ] 상품의 이름, 가격, 프로모션을 받아 상품을 성공적으로 생성한다.

### 재고 관리 테스트

- [ ] 각 상품의 재고를 고려하여 주문 가능 여부를 확인한다.
- [ ] 주문이 가능하지 않다면 예외가 발생한다.
- [ ] 주문이 이루어지면 해당 상품의 재고를 감소시킨다.

### 프로모션 테스트

- [ ] 프로모션의 이름, 구매수량, 증정수량, 시작날짜, 종료날짜를 입력받아 프로모션을 생성한다.
- [ ] 프로모션 재고를 고려하여 적용 가능 여부를 확인한다.
- [ ] 구매 수량과 프로모션 적용 수량을 비교하여 구매 수량을 추가할지 확인한다.
- [ ] 구매 수량과 프로모션 적용 수량을 비교하여 프로모션 재고가 부족하면 일반 재고를 사용할지 확인한다.

### 멤버십 테스트

- [ ] 예상 구매 목록을 받아 예상 멤버십 할인 금액을 계산한다.
- [ ] 예상 멤버십 할인 금액이 한도를 초과한다면 예외가 발생한다.

### 주문 테스트

- [ ] 상품과 수량으로 주문을 성공적으로 생성한다.
- [ ] 주문을 생성할수 없다면 예외가 발생한다.

### 영수증 테스트

- [ ] 주문을 받아 영수증을 성공적으로 생성한다.

## 작성자

lvalentine6 (이승로)
